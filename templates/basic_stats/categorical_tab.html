{# Categorical tab. Using bootstrap classes. The tab container (div#statistics) and navigation links (ul#statistics_tab)
            are defined in basic_stats.html #}
<div class="tab-pane fade {% if categorical_tab %}show active{% endif %}" id="categorical_tab"
     role="tabpanel" aria-labelledby="c_settings_header">
    <div id="categorical_accordion">

        <!-- maybe macro for that -->
        <div class="card">
            <div class="card-header" id="c_settings_header">
                <h5 class="mb-0">
                    <button class="btn btn-link" data-toggle="collapse" data-target="#categorical_settings"
                        {% if categorical_entities %} aria-expanded="true" {% endif %} aria-controls="categorical_settings">
                        Settings
                    </button>
                </h5>
            </div>
            <div id="categorical_settings" class="collapse show "
                 aria-labelledby="c_settings_header" data-parent="#categorical_accordion">

                <div class="card-body">
                    {% import 'macro_template.html' as m %}

                    {% if error %}
                    {{ m.show_error(error) }}
                    {% endif %}
                    <form id="form3" action="" method="POST">
                        {{ m.entity_form3(id3= "measurement",name =all_measurement,value=entity,select=measurement2,d=name,block=block) }}
                        {{ m.entity_form2(id2= "categorical_entities",name =all_categorical_entities ,value=entity,select=categorical_entities,d="Categorical entities:") }}

                        <button id="Plot2" name="basic_stats_c" class="btn btn-outline-info">Basic Stats</button>
                    </form>
                </div>
            </div>
        </div>


        <!-- maybe macro for that -->
        <div class="card">
            <div class="card-header" id="results_header">
                  <h5 class="mb-0">
                      <button class="btn btn-link" data-toggle="collapse" data-target="#categorical_results"
                              {% if categorical_entities %} aria-expanded="true" {% endif %} aria-controls="#categorical_results">
                          Results
                      </button>
                </h5>
            </div>
            <div id="categorical_results" class="collapse {% if categorical_entities %} show {% endif %}"
                 aria-labelledby="c_results_header" data-parent="#categorical_accordion">
                <div class="card-body">
                    {% if basic_stats_c %}
                    <a href="{{url_for('download', filename = 'data.csv')}}" id="download" class="btn btn-outline-info">Download</a>
                    <table class="table table-stripped">
                        <thead>
                            <tr>
                                <th>Entity</th>
                                {% if block != 'none' %}<th>{{ measurement_name }}</th>{% endif %}
                                <!-- {% if block != 'none' %}<th>Instances number</th>{% endif %} -->
                                <th>Count</th>
                                <th>Count NaN</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for entity in categorical_entities %}
                            {% for v in measurement2 %}
                            {% for i in instance %}
                            <tr>
                                {% if basic_stats_c['count'][entity,v,i] is defined %}
                                <td>{{ entity }}</td>
                                {% if block != 'none' %}<td>{{ v }}</td>{% endif %}
                                <!-- {% if block != 'none' %}<td>{{ i }}</td>{% endif %} -->
                                <td>{{ basic_stats_c['count'][entity,v,i]}}</td>
                                <td>{{ basic_stats_c['count NaN'][entity,v,i] }}</td>
                                {% endif %}
                            </tr>
                            {% endfor %}
                            {% endfor %}
                            {% endfor %}
                        </tbody>
                    </table>
                    {% endif %}
                </div>
            </div>
        </div>


    </div>
</div>